import{j as s,N as u,c as _,a as l,R as x,F as h,b as v,m as p,r as j,d as M,e as g,f,g as C}from"./index-Dp6SFIb0.js";const A="_dialogs_1hkd1_1",N="_dialogsItems_1hkd1_13",y="_messages_1hkd1_55",b="_sendMessageContainer_1hkd1_93",R="_textArea_1hkd1_103",r={dialogs:A,dialogsItems:N,messages:y,sendMessageContainer:b,textArea:R},S="_dialog_18fiz_1",F="_avatar_18fiz_37",d={dialog:S,avatar:F},k=e=>{const{dialog:{name:o,id:n,avatar:t,self:a}}=e;return s.jsx("div",{className:d.dialog,children:s.jsxs(u,{to:`/dialogs/${n}`,children:[s.jsx("img",{className:d.avatar,src:t,alt:"avatar"}),o]})})},P="_message_vbm94_1",T="_myMessage_vbm94_23",I="_interlocutorMessage_vbm94_33",D="_avatar_vbm94_43",i={message:P,myMessage:T,interlocutorMessage:I,avatar:D},$=e=>{const{message:{message:o,isSelf:n,avatar:t}}=e,a=_({[i.message]:!0,[i.myMessage]:n,[i.interlocutorMessage]:!n});return s.jsxs("div",{className:a,children:[s.jsx("img",{className:i.avatar,src:t,alt:"avatar_message"}),o]})};function w(e){const{dialogsPage:{dialogs:o,messages:n},onSendMessage:t}=e;return e.isAuth?s.jsxs("div",{className:r.dialogs,children:[s.jsx("div",{className:r.dialogsItems,children:o.map(a=>s.jsx(k,{dialog:a},a.id))}),s.jsxs("div",{className:r.messages,children:[n.map(a=>s.jsx($,{message:a},a.id)),s.jsx("div",{children:s.jsx(z,{onSendMessage:t})})]})]}):s.jsx(l,{to:"/login"})}function z(e){const o=(t,a)=>{e.onSendMessage(t.newTextMessage),a.restart()},n=(...t)=>a=>t.reduce((c,m)=>c||m(a),void 0);return s.jsx(x,{onSubmit:o,render:({handleSubmit:t,form:a})=>s.jsxs("form",{className:r.sendMessageContainer,onSubmit:c=>t(c,a),children:[s.jsx(h,{name:"newTextMessage",component:v,validate:n(j,p(100)),componentType:"textarea",styles:[r.textArea],placeholder:"Введите сообщение"}),s.jsx("button",{type:"submit",children:"Send"})]})})}const L=e=>({isAuth:e.auth.isAuth});function q(e){class o extends M.Component{render(){return this.props.isAuth?s.jsx(e,{...this.props}):s.jsx(l,{to:"/login"})}}return g(L)(o)}const E=e=>({dialogsPage:e.dialogsPage}),V=e=>({onSendMessage:o=>{e(C(o))}}),G=f(g(E,V),q)(w);export{G as default};
